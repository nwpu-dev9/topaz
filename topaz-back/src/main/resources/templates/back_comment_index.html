<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Topaz - 话题列表</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"> </script>
    <script>

        function delete_id(id, page, limit) {
            $.ajax({
                url: "/api/admin/comment/" + id,
                type: "delete",
                success: function (msg) {
                    $.ajax(
                        {
                            url: "/admin/comment/" + "?page=" +page +"&limit=" +limit,
                            type: "get",
                            success: function (msg) {
                                document.write(msg);
                                document.close();
                            }
                        }
                    )
                }

            })
        }
    </script>
</head>
<body>

<ul id="comment-list" style="height: 500px; overflow: auto">
    <li th:id="${comment.commentId}" th:object="${comments}" th:each="comment: ${comments}">
        <a th:href="|/admin/comment/${comment.commentId}|">comment title</a>
        <h1 class="comment-box-info">
            <span>发表时间:<span class="comment-timestamp" th:text="${comment.commentTime}"></span></span>
            <span>评论的话题<span th:text="${comment.topic.title}"></span></span>
            <span>评论者<span th:text="${comment.commenter}"></span></span>
        </h1>
        <div class="comment-box-delete">
            <button th:onclick="'delete_id('+${comment.commentId}+','+${page}+','+${limit}+');'" ><span class="button">删除</span></button>
        </div>
    </li>
</ul>
<nav id="post-nav">
        <span class="prev">
            <a th:href="@{/admin/comment/(page=${page -1}, limit=${limit})}" th:if="${page}>0">
                <span class="button">上一页</span>
            </a>
        </span>

    <span class="next">
            <a th:href="@{/admin/comment/(page=${page +1}, limit=${limit})}" th:if="${page} < ${pageCount -1}">
                <span class="button">下一页</span>
            </a>
        </span>
</nav>
</body>
</html>